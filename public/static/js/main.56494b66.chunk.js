(this.webpackJsonpbookz=this.webpackJsonpbookz||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports={alignCenter:"Box_alignCenter__27XjQ",alignRight:"Box_alignRight__1hxpN",alignLeft:"Box_alignLeft__396-L",center:"Box_center__23n8h",inline:"Box_inline__TO5lE",p_xxs:"Box_p_xxs__2BXML",p_xs:"Box_p_xs__19zNE",p_xsm:"Box_p_xsm__2QHof",p_sm:"Box_p_sm__VI5RM",p_md:"Box_p_md__1rIs6",p_lg:"Box_p_lg__1wz6X",p_xlg:"Box_p_xlg__25LBw",p_xxl:"Box_p_xxl__2wzBd",p_xxxl:"Box_p_xxxl__3wXUJ",pt_xxs:"Box_pt_xxs__32bbR",pt_xs:"Box_pt_xs__26qbd",pt_xsm:"Box_pt_xsm__1z43f",pt_sm:"Box_pt_sm__37g7e",pt_md:"Box_pt_md__3dWAX",pt_lg:"Box_pt_lg__3nd36",pt_xlg:"Box_pt_xlg__3sBrQ",pt_xxl:"Box_pt_xxl__myjex",pt_xxxl:"Box_pt_xxxl__1zuxH",pb_xxs:"Box_pb_xxs__1aZEU",pb_xs:"Box_pb_xs__1fWdh",pb_xsm:"Box_pb_xsm__LntZZ",pb_sm:"Box_pb_sm__19Lj8",pb_md:"Box_pb_md__1VGDL",pb_lg:"Box_pb_lg__3dDkQ",pb_xlg:"Box_pb_xlg__3PX5x",pb_xxl:"Box_pb_xxl__1bynD",pb_xxxl:"Box_pb_xxxl__3zkTw",pr_xxs:"Box_pr_xxs__27o9t",pr_xs:"Box_pr_xs__3V7HH",pr_xsm:"Box_pr_xsm__27_dQ",pr_sm:"Box_pr_sm__ZMTpv",pr_md:"Box_pr_md__3hggj",pr_lg:"Box_pr_lg__1O_sz",pr_xlg:"Box_pr_xlg__17GHy",pr_xxl:"Box_pr_xxl__yzHWP",pr_xxxl:"Box_pr_xxxl__2qBS2",pl_xxs:"Box_pl_xxs__3hUN7",pl_xs:"Box_pl_xs__1Cyq6",pl_xsm:"Box_pl_xsm__1gjVN",pl_sm:"Box_pl_sm__3inal",pl_md:"Box_pl_md__d706K",pl_lg:"Box_pl_lg__39jB0",pl_xlg:"Box_pl_xlg__8uwPg",pl_xxl:"Box_pl_xxl__2iA7_",pl_xxxl:"Box_pl_xxxl__9xKNI",m_xxs:"Box_m_xxs__1xxju",m_xs:"Box_m_xs__3wFgs",m_xsm:"Box_m_xsm__3o74Y",m_sm:"Box_m_sm__28j1I",m_md:"Box_m_md__3VttI",m_lg:"Box_m_lg__3AcWW",m_xlg:"Box_m_xlg__3sZuw",m_xxl:"Box_m_xxl__2aJf4",m_xxxl:"Box_m_xxxl__2N5tK",mt_xxs:"Box_mt_xxs__1aA2d",mt_xs:"Box_mt_xs__2wxjR",mt_xsm:"Box_mt_xsm__2de-4",mt_sm:"Box_mt_sm__3-Pct",mt_md:"Box_mt_md__2yYaO",mt_lg:"Box_mt_lg__1cnXX",mt_xlg:"Box_mt_xlg__YNncI",mt_xxl:"Box_mt_xxl__2hmNE",mt_xxxl:"Box_mt_xxxl__2F4IK",mb_xxs:"Box_mb_xxs__LZo14",mb_xs:"Box_mb_xs__rR0r6",mb_xsm:"Box_mb_xsm__OrweP",mb_sm:"Box_mb_sm__3o9ty",mb_md:"Box_mb_md__1wE_G",mb_lg:"Box_mb_lg__3lU_K",mb_xlg:"Box_mb_xlg__6Xni7",mb_xxl:"Box_mb_xxl__y0-kN",mb_xxxl:"Box_mb_xxxl__3-yeq",mr_xxs:"Box_mr_xxs__35tDo",mr_xs:"Box_mr_xs__MOFGR",mr_xsm:"Box_mr_xsm__1a1sf",mr_sm:"Box_mr_sm__m91Sh",mr_md:"Box_mr_md__wLE-g",mr_lg:"Box_mr_lg__2jSsP",mr_xlg:"Box_mr_xlg__3YM5N",mr_xxl:"Box_mr_xxl__1AfZK",mr_xxxl:"Box_mr_xxxl__2SBTk",ml_xxs:"Box_ml_xxs__1qw3e",ml_xs:"Box_ml_xs__1fO6C",ml_xsm:"Box_ml_xsm__1IlWF",ml_sm:"Box_ml_sm__3kK3R",ml_md:"Box_ml_md__3zZRH",ml_lg:"Box_ml_lg__3d-_o",ml_xlg:"Box_ml_xlg__2XF1y",ml_xxl:"Box_ml_xxl__3L2qA",ml_xxxl:"Box_ml_xxxl__1oA1F"}},function(e,t,a){e.exports={inputWrapper:"Input_inputWrapper__2y4HX",input:"Input_input__1G7Da",error:"Input_error__167xo",disabled:"Input_disabled__1iFpG",label:"Input_label__3QRxf",errorText:"Input_errorText__1yHqc"}},function(e,t,a){e.exports={header:"Header_header__1X_E4",wrapper:"Header_wrapper__2SSyc",logInWrapper:"Header_logInWrapper__14RfS",panelWrapper:"Header_panelWrapper__2TxSz",panel:"Header_panel__ztBUa",panelButton:"Header_panelButton__2s159"}},,,,,function(e,t,a){e.exports={panel:"Panel_panel__g1VzZ",title:"Panel_title__1H6IK"}},,,,,,,,,,function(e,t,a){e.exports={link:"Link_link__1lgHq"}},function(e,t,a){e.exports={logo:"Logo_logo__1NyJz"}},function(e,t,a){e.exports={button:"Button_button__1PA_U"}},function(e,t,a){e.exports={registerWrapper:"RegisterPage_registerWrapper__3thwf"}},,,function(e,t,a){e.exports={avatar:"HomePage_avatar__yfWoK"}},function(e,t,a){e.exports={main:"App_main__uN9ca"}},,function(e,t,a){e.exports=a(53)},,,,,function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){e.exports=a.p+"static/media/avatar.2dea3bd4.jpg"},,,,function(e,t,a){"use strict";a.r(t);var n,r=a(0),_=a.n(r),l=a(24),o=a.n(l),s=(a(41),a(42),a(1)),c=a.n(s),x=a(3),m=a(14),u=a(9),i={home:"/",auth:"/auth",authLogin:"/auth/login",authRegister:"/auth/register"},p=a(25),g=(n={authLogin:"auth/login",authVK:"auth/vkontakte",authGoogle:"auth/google",authLogout:"auth/logout",usersRegister:"users/register",usersMe:"users/me",usersAvatar:"users/avatar"},Object(p.mapValues)(n,(function(e){return"".concat("https://quiet-spire-65637.herokuapp.com/api/").concat(e)}))),d=function(e){var t,a=document.cookie,n=e+"=",r=a.indexOf("; "+n);if(-1===r){if(0!==(r=a.indexOf(n)))return null}else r+=2,-1===(t=document.cookie.indexOf(";",r))&&(t=a.length);return decodeURI(a.substring(r+n.length,t))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(r.useState)(e),a=Object(x.a)(t,2),n=a[0],_=a[1],l=Object(r.useCallback)((function(){return _(!0)}),[]),o=Object(r.useCallback)((function(){return _(!1)}),[]),s=Object(r.useCallback)((function(){return _(!n)}),[n]);return{open:l,close:o,isActive:n,toggle:s}},h=a(8),b=a(35),B=a(26),E=a(13),v=a.n(E),j=a(10),w=a.n(j),O=["m","mt","mr","mb","ml","p","pt","pr","pb","pl"],C=["xxs","xs","xsm","sm","md","lg","xlg","xxl","xxxl"],y=function(e){var t,a=e.children,n=e.className,r=e.id,l=e.alignCenter,o=e.alignRight,s=e.alignLeft,c=e.onClick,x=e.center,m=e.inline,u=e.dataTestId,i=Object(B.a)(e,["children","className","id","alignCenter","alignRight","alignLeft","onClick","center","inline","dataTestId"]),p=v.a.apply(void 0,[n].concat(Object(b.a)(function(e){var t=[];return Object.keys(e).forEach((function(a){var n=e[a];n&&(O.includes(a)||console.error('Wrong "key" \u2013 '.concat(a," passed to Box component")),C.includes(n)||console.error('Wrong "value" \u2013 '.concat(n,' passed for key "').concat(a,'" to Box component')),t.push(w.a["".concat(a,"_").concat(n)]))})),t}(i)),[(t={},Object(h.a)(t,w.a.center,x),Object(h.a)(t,w.a.inline,m),Object(h.a)(t,w.a.alignCenter,l),Object(h.a)(t,w.a.alignRight,o),Object(h.a)(t,w.a.alignLeft,s),t)]));return _.a.createElement("div",{className:p,id:r,"data-testid":u,onClick:c},a)},k=a(27),N=a.n(k),R=function(e){var t=e.href,a=e.children,n=e.onClick;return _.a.createElement("a",{href:t,onClick:n,className:N.a.link},a)},L=a(28),S=a.n(L),W=function(){return _.a.createElement("span",{className:S.a.logo},"bookz")},I=a(17),T=a.n(I),H=function(e){var t=e.title,a=e.children,n=e.className;return _.a.createElement(y,{p:"sm",className:v()(T.a.panel,n)},_.a.createElement("p",{className:T.a.title},t),_.a.createElement(y,{mt:"xsm"},a))},U=a(11),z=a.n(U),F=_.a.forwardRef((function(e,t){var a,n=e.value,r=e.type,l=e.name,o=e.error,s=e.touched,c=e.label,x=e.disabled,m=e.onChange,u=v()(z.a.input,(a={},Object(h.a)(a,z.a.error,s&&o),Object(h.a)(a,z.a.disabled,x),a));return _.a.createElement("div",{className:z.a.inputWrapper},c&&_.a.createElement("label",{className:z.a.label},c),_.a.createElement("input",{ref:t,type:r,name:l,value:n,className:u,disabled:x,onChange:m}),s&&o&&_.a.createElement("p",{className:z.a.errorText},o))})),P=a(29),A=a.n(P),X=function(e){var t=e.onClick,a=e.children;return _.a.createElement("button",{className:A.a.button,onClick:t},a)},q=a(12),K=a.n(q),G=function(e){var t=e.user,a=e.setUser,n=Object(r.useState)(""),l=Object(x.a)(n,2),o=l[0],s=l[1],m=Object(r.useState)(""),u=Object(x.a)(m,2),p=u[0],d=u[1],h=f(!1),b=h.toggle,B=(h.close,h.isActive);return _.a.createElement(r.Fragment,null,_.a.createElement("div",{className:K.a.header},_.a.createElement(y,{mt:"xxs",ml:"md",className:K.a.wrapper},_.a.createElement(W,null),!t&&_.a.createElement("div",{className:K.a.logInWrapper},_.a.createElement(y,{mt:"xsm",mr:"sm"},_.a.createElement(R,{onClick:b},"\u0412\u043e\u0439\u0442\u0438")),_.a.createElement(y,{mt:"xsm",mr:"sm"},_.a.createElement(R,{href:i.authRegister},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))),t&&_.a.createElement(r.Fragment,null,t.username,_.a.createElement(R,{onClick:function(){fetch(g.authLogout,{mode:"cors",withCredentials:!0,credentials:"include",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(){return a(null)}))}},"\u0412\u044b\u0439\u0442\u0438")))),!t&&B&&_.a.createElement(y,{mt:"lg",mr:"xlg",className:K.a.panelWrapper},_.a.createElement(H,{title:"\u0412\u0445\u043e\u0434 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443",className:K.a.panel},_.a.createElement(F,{label:"\u041b\u043e\u0433\u0438\u043d",value:o,onChange:function(e){return s(e.target.value)}}),_.a.createElement(y,{mt:"xs"},_.a.createElement(F,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",value:p,onChange:function(e){return d(e.target.value)}})),_.a.createElement(y,{mt:"xs",className:K.a.panelButton},_.a.createElement(X,{onClick:function(){var e,t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(fetch(g.authLogin,{method:"POST",mode:"cors",withCredentials:!0,credentials:"include",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:o,password:p})}));case 2:return e=n.sent,n.next=5,c.a.awrap(e.json());case 5:t=n.sent,console.log(t),a(t);case 8:case"end":return n.stop()}}))}},"\u0412\u0445\u043e\u0434"),_.a.createElement("a",{href:g.authVK},"VK"),_.a.createElement("a",{href:g.authGoogle},"Google")))))},V=function(){var e=Object(r.useState)(""),t=Object(x.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(""),o=Object(x.a)(l,2),s=o[0],m=o[1];return _.a.createElement(r.Fragment,null,_.a.createElement(F,{label:"\u041b\u043e\u0433\u0438\u043d",value:a,onChange:function(e){return n(e.target.value)}}),_.a.createElement(F,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",value:s,onChange:function(e){return m(e.target.value)}}),_.a.createElement(X,{onClick:function(){var e,t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(fetch(g.authLogin,{method:"POST",mode:"cors",withCredentials:!0,credentials:"include",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:a,password:s})}));case 2:return e=n.sent,n.next=5,c.a.awrap(e.json());case 5:t=n.sent,console.log(t);case 7:case"end":return n.stop()}}))}},"\u0412\u0445\u043e\u0434"),_.a.createElement(X,{onClick:function(){var e,t;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.awrap(fetch("http://localhost:4000/api/auth/dashboard",{withCredentials:!0,credentials:"include"}));case 2:return e=a.sent,a.next=5,c.a.awrap(e.json());case 5:t=a.sent,console.log(t);case 7:case"end":return a.stop()}}))}},"test"),_.a.createElement(X,{onClick:function(){var e,t;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.awrap(fetch(g.authLogout,{mode:"cors",withCredentials:!0,credentials:"include",headers:{"Content-Type":"application/json;charset=utf-8"}}));case 2:return e=a.sent,a.next=5,c.a.awrap(e.json());case 5:t=a.sent,console.log(t);case 7:case"end":return a.stop()}}))}},"logout"))},J=a(30),M=a.n(J),Z=Object(u.g)((function(e){var t=e.history,a=e.setUser,n=Object(r.useState)(""),l=Object(x.a)(n,2),o=l[0],s=l[1],m=Object(r.useState)(""),u=Object(x.a)(m,2),p=u[0],d=u[1];return _.a.createElement(r.Fragment,null,_.a.createElement(y,{mt:"xxxl",className:M.a.registerWrapper},_.a.createElement(F,{label:"\u041b\u043e\u0433\u0438\u043d",value:o,onChange:function(e){return s(e.target.value)}}),_.a.createElement(y,{mt:"xs"},_.a.createElement(F,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",value:p,onChange:function(e){return d(e.target.value)}})),_.a.createElement(y,{mt:"xs"},_.a.createElement(X,{onClick:function(){var e,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.a.awrap(fetch(g.usersRegister,{method:"POST",mode:"cors",withCredentials:!0,credentials:"include",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:o,password:p})}));case 2:return e=r.sent,r.next=5,c.a.awrap(e.json());case 5:n=r.sent,console.log(n),a(n),t.push(i.home);case 9:case"end":return r.stop()}}))}},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))})),D=function(e){var t=e.setUser;return _.a.createElement(u.d,null,_.a.createElement(u.b,{exact:!0,path:i.authLogin,component:V}),_.a.createElement(u.b,{exact:!0,path:i.authRegister,render:function(e){return _.a.createElement(Z,Object.assign({setUser:t},e))}}))},Q=a(33),Y=a.n(Q),$=function(){var e=Object(r.useState)(a(49)),t=Object(x.a)(e,2),n=t[0],l=t[1],o=Object(r.useState)(void 0),s=Object(x.a)(o,2),c=s[0],m=s[1],u=_.a.createRef(),i=function(e,t,a){var n=new XMLHttpRequest;n.open("PUT",t),n.onreadystatechange=function(){console.log("xhr",n),4===n.readyState&&(200===n.status?l(a):alert("Could not upload file."))},n.send(e)},p=function(){u.current.click()},d=function(){(new FormData).append("file",c),function(e){var t=new XMLHttpRequest;t.open("GET","".concat(g.usersAvatar,"?file-name=").concat(e.name,"&file-type=").concat(e.type)),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var a=JSON.parse(t.responseText);i(e,a.signedRequest,a.url)}else alert("Could not get signed URL.")},t.send()}(c)};return _.a.createElement(r.Fragment,null,_.a.createElement("img",{className:Y.a.avatar,src:n,onClick:p}),_.a.createElement(X,{onClick:function(e){return p()}},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"),_.a.createElement(F,{ref:u,type:"file",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",name:"avatar",onChange:function(e){return function(e){var t=new FileReader;if(e.target.files&&e.target.files.length>0){var a=e.target.files[0];m(a),t.readAsDataURL(a),t.onload=function(){l(URL.createObjectURL(a))}}}(e)}}),_.a.createElement(X,{onClick:function(e){return d()}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"))},ee=function(e){var t=e.match.url;return _.a.createElement(u.d,null,_.a.createElement(u.b,{exact:!0,path:t,component:$}),_.a.createElement(u.a,{to:t}))},te=a(34),ae=a.n(te),ne=function(){var e=Object(r.useState)(null),t=Object(x.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){d("connect.sid")&&function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.awrap(fetch(g.usersMe,{withCredentials:!0,credentials:"include"}));case 2:if(403!==(e=t.sent).status){t.next=5;break}return t.abrupt("return",null);case 5:return t.next=7,c.a.awrap(e.json());case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}))}().then((function(e){return n(e)}))}),[]),_.a.createElement(r.Fragment,null,_.a.createElement(G,{user:a,setUser:n}),_.a.createElement("div",{className:ae.a.main},_.a.createElement(m.a,null,_.a.createElement(u.d,null,_.a.createElement(u.b,{path:i.auth,render:function(e){return _.a.createElement(D,Object.assign({setUser:n},e))}}),_.a.createElement(u.b,{path:i.home,component:ee})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(50).config(),o.a.render(_.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[36,1,2]]]);
//# sourceMappingURL=main.56494b66.chunk.js.map